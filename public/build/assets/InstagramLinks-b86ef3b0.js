import{r as p,u as k,o as w,a as f,c as g,b as a,d as n,w as o,F as S,H as A,e as t,f as D,g as _,t as b,h as $,v as C,T as E,i as N}from"./app-665b1da9.js";import{e as h,D as T}from"./jquery.dataTables-8dd170d6.js";import{_ as V}from"./AuthenticatedLayout-ab354796.js";import{_ as I,a as L,b as B}from"./TextInput-880d6888.js";import{_ as U}from"./PrimaryButton-e7652d4d.js";import{_ as F}from"./DangerButton-54c25456.js";import"./ApplicationLogo-bff1e0f0.js";import"./_plugin-vue_export-helper-c27b6911.js";const q=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Instagram Links",-1),H={class:"py-12"},M={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},j={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},O=t("div",null,[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Add Link")],-1),z=["onSubmit"],G={class:"flex items-center gap-4"},J={key:0,class:"text-sm text-gray-600"},K={class:"py-12 pt-4"},P={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},Q={class:"p-4 sm:p-8 bg-white shadow sm:rounded-lg"},R=t("thead",null,[t("tr",null,[t("th",null,"Image"),t("th",null,"Created At"),t("th",null,"Updated At"),t("th",null,"Actions")])],-1),ne={__name:"InstagramLinks",props:{links:Array},setup(c){const x=c;h.use(T);const i=p(!1),l=p(null),e=k({link:""}),v=()=>{if(e.clearErrors(),!e.link||e.link.trim()===""){e.setError("link","link field is required");return}e.processing=!0,i.value?e.put(`/admin/links/${l.value.id}`,{onSuccess:()=>{i.value=!1,e.processing=!1,e.reset()}}):e.post("/admin/links",{onSuccess:()=>{e.reset(),e.processing=!1}})};return w(()=>{document.getElementById("dt").addEventListener("click",function(r){if(r.target.nodeName!=="BUTTON")return;const s=r.target,u=s.getAttribute("data-type"),m=s.getAttribute("data-id");u==="del"?confirm("Are you sure you want to delete this instagram image?")&&(s.setAttribute("disabled",!0),s.innerText="Deleting",e.delete("/admin/links/"+m)):u==="edit"&&(l.value=x.links.filter(({id:y})=>m==y)[0],e.link=l.value.link,i.value=!0)});let d=document.createElement("script");d.setAttribute("src","https://instagram.com/embed.js"),document.head.appendChild(d)}),(d,r)=>(f(),g(S,null,[a(n(A),{title:"Instagram Links"}),a(V,null,{header:o(()=>[q]),default:o(()=>[t("div",H,[t("div",M,[t("div",j,[O,t("form",{onSubmit:D(v,["prevent"]),class:"mt-6 space-y-6"},[t("div",null,[a(I,{for:"name",value:"Name"}),a(L,{id:"link",type:"text",class:"mt-1 block w-full",modelValue:n(e).link,"onUpdate:modelValue":r[0]||(r[0]=s=>n(e).link=s),required:"",autofocus:"",autocomplete:"link"},null,8,["modelValue"]),a(B,{class:"mt-2",message:n(e).errors.link},null,8,["message"])]),t("div",G,[a(U,{disabled:n(e).processing},{default:o(()=>[_(b(i.value?"Update":"Save"),1)]),_:1},8,["disabled"]),$(a(F,null,{default:o(()=>[_("Cancel")]),_:1},512),[[C,i.value]]),a(E,{"enter-from-class":"opacity-0","leave-to-class":"opacity-0",class:"transition ease-in-out"},{default:o(()=>[n(e).recentlySuccessful?(f(),g("p",J,b(i.value?"Updated":"Saved"),1)):N("",!0)]),_:1})])],40,z)])])]),t("div",K,[t("div",P,[t("div",Q,[a(n(h),{id:"dt",options:{responsive:!0},data:c.links,columns:[{data:"link"},{data:"created_at",render:s=>new Date(s).toDateString()},{data:"updated_at",render:s=>new Date(s).toDateString()},{data:null,render:s=>`<button data-type=edit data-id=${s.id} class='inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150 mr-3'>Edit</button> <button data-type=del data-id=${s.id} class='inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-500 active:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150'>Delete</button>`}],class:"display table table-responsive"},{default:o(()=>[R]),_:1},8,["data","columns"])])])])]),_:1})],64))}};export{ne as default};
